# Session Log: 2026-02-03

## Context
Continuing work from previous session. Main issues: simulation timeouts, Anthropic credits exhausted.

## Work Completed

### 1. Vote Simulation History System
- Created `StoredSimulation` type for permanent storage
- Added `src/lib/simulation/history.ts` with hash-based deduplication
- Updated simulate API to check for cached results before running
- Updated drafts page to show cached simulations inline
- Added `draftUuid` parameter for linking simulations to drafts

### 2. Production Deployment
- Fixed Vercel deployment issues (re-linked project)
- Deployed simulation history changes
- Discovered MONGODB_URI was missing from production env vars
- User fixed env vars, deployment now working

### 3. Information Ecosystem Architecture
- Created `.context/` directory structure
- Wrote soul layer: mission, principles, ethics
- Wrote state layer: health.json, blockers.json
- Wrote action layer: priorities.md
- Wrote knowledge layer: failures.md
- This session log

## Discovered Issues

1. **Anthropic credits exhausted** — All AI features broken
2. **Credentials in repository** — Security vulnerability
3. **No provider fallback** — Single point of failure
4. **Silent degradation** — Bad UX when features fail

## Decisions Made

1. Reconceptualized project as "political project expressed through software"
2. Created living context system instead of static documentation
3. Established reliability > features as core principle

## State at End of Session

- Production: Healthy (database connected)
- AI Features: Broken (no Anthropic credits)
- Blocking Issue: Need to add credits or configure alternative provider

## Next Session Should

1. Resolve AI provider issue (Anthropic credits OR switch to OpenAI/Gemini)
2. Implement provider fallback chain
3. Add UI indicators for degraded mode
4. Rotate exposed credentials
